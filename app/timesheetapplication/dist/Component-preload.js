//@ui5-bundle timesheetapplication/Component-preload.js
sap.ui.require.preload({
	"timesheetapplication/Component.js":function(){
sap.ui.define(["sap/ui/core/UIComponent","sap/ui/Device","timesheetapplication/model/models"],function(e,t,i){"use strict";return e.extend("timesheetapplication.Component",{metadata:{manifest:"json"},init:function(){e.prototype.init.apply(this,arguments);this.getRouter().initialize();this.setModel(i.createDeviceModel(),"device")}})});
},
	"timesheetapplication/Fragments/Headericon.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:form="sap.ui.layout.form"><ResponsivePopover id="LogoutForm" class="sapUiContentPadding" placement="Bottom" title="Account"><content><VBox><Title id="title" text="" level="H1"></Title><Link id="email" text=""></Link><Link id="Home" text="Go to home" press="onHomePress"></Link></VBox></content><endButton><Button id="Signoutbutton" icon="sap-icon://log" text="SignOut" press="HandleSignout" type="Emphasized"/></endButton></ResponsivePopover></core:FragmentDefinition>',
	"timesheetapplication/controller/App.controller.js":function(){
sap.ui.define(["sap/ui/core/mvc/Controller"],function(e){"use strict";return e.extend("timesheetapplication.controller.App",{onInit:function(){}})});
},
	"timesheetapplication/controller/NewTimesheet.controller.js":function(){
sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","sap/m/MessageToast","sap/ui/core/Fragment","sap/m/MessageBox"],function(e,t,a,s,r){"use strict";var o=this;return e.extend("timesheetapplication.controller.NewTimesheet",{onInit:function(){o.array=[];o.oGmodel=this.getOwnerComponent().getModel("oGmodel");this.getOwnerComponent().getRouter().getRoute("NewTimesheet").attachPatternMatched(this._onPatternMatched,this)},_onPatternMatched:function(e){var a=this.getView();this.getDateRanges();this.oGmodel=this.getOwnerComponent().getModel("oGmodel");if(!o.oGmodel.oData["loggedInUser"]){this.getOwnerComponent().getRouter().navTo("RouteView");return}o.sDateRange=e.getParameter("arguments").dateRange;o.Status=e.getParameter("arguments").Status;o.Sdate=e.getParameter("arguments").Sdate;o.Ssubmit=e.getParameter("arguments").submit;var s=new Date(o.Sdate);var r=String(s.getDate()).padStart(2,"0");var i=String(s.getMonth()+1).padStart(2,"0");var n=s.getFullYear();var l=r+"-"+i+"-"+n;o.sName=e.getParameter("arguments").Name;var g=new sap.ui.model.json.JSONModel;this.getView().setModel(g,"ostatusModel");this.getView().getModel("ostatusModel").setProperty("/Status",o.Status);this.getView().getModel("ostatusModel").setProperty("/SubName",o.Ssubmit);this.getView().getModel("ostatusModel").setProperty("/SubDate",l);var d=o.oGmodel.oData.odata.MANAGERFLAG;var u=this.oGmodel.oData.loggedInUser.FullName;this.getView().byId("dateRangeComboBox").setSelectedKey("");if(o.Status==="Submitted"&&d==="Yes"){this.getView().mAggregations.content[0].mAggregations.pages[0].mAggregations.footer.removeStyleClass("classFooterHidden").addStyleClass("classFooterVisible");this.getView().byId("idsavebtn").setVisible(false);this.getView().byId("idsubmitforapproval").setVisible(false);this.getView().byId("idapproval").setVisible(true);this.getView().byId("iddelete").setVisible(true);this.getView().byId("Addiconbtn").setVisible(false);this.getView().byId("dateRangeComboBox").setSelectedKey(o.sDateRange);this.getView().byId("dateRangeComboBox").setEnabled(false);var h=this.oGmodel.oData["loggedInUser"].Email;this.getView().byId("statusvisible").setVisible(true);this.getView().byId("subdatevisible").setVisible(true);this.getView().byId("substatusvisible").setVisible(true)}else if(o.Status==="Saved"){this.getView().mAggregations.content[0].mAggregations.pages[0].mAggregations.footer.removeStyleClass("classFooterHidden").addStyleClass("classFooterVisible");this.getView().byId("idsavebtn").setVisible(true);this.getView().byId("idsubmitforapproval").setVisible(true);this.getView().byId("idapproval").setVisible(false);this.getView().byId("Addiconbtn").setVisible(true);this.getView().byId("dateRangeComboBox").setEnabled(true);this.getView().byId("dateRangeComboBox").setSelectedKey(o.sDateRange);this.getView().byId("statusvisible").setVisible(true);this.getView().byId("subdatevisible").setVisible(true);this.getView().byId("substatusvisible").setVisible(true);this.getView().byId("iddelete").setVisible(false);var h=this.oGmodel.oData["loggedInUser"].Email}else if(o.Status==="Approved"){this.getView().mAggregations.content[0].mAggregations.pages[0].mAggregations.footer.removeStyleClass("classFooterVisible").addStyleClass("classFooterHidden");this.getView().byId("Addiconbtn").setVisible(false);this.getView().byId("dateRangeComboBox").setSelectedKey(o.sDateRange);this.getView().byId("dateRangeComboBox").setEnabled(false);this.getView().byId("statusvisible").setVisible(true);this.getView().byId("subdatevisible").setVisible(true);this.getView().byId("substatusvisible").setVisible(true);this.getView().byId("iddelete").setVisible(false)}else if(o.Status==="Submitted"&&d==="No"){this.getView().mAggregations.content[0].mAggregations.pages[0].mAggregations.footer.removeStyleClass("classFooterVisible").addStyleClass("classFooterHidden");this.getView().byId("Addiconbtn").setVisible(false);this.getView().byId("dateRangeComboBox").setSelectedKey(o.sDateRange);this.getView().byId("dateRangeComboBox").setEnabled(false);this.getView().byId("statusvisible").setVisible(true);this.getView().byId("subdatevisible").setVisible(true);this.getView().byId("substatusvisible").setVisible(true);this.getView().byId("iddelete").setVisible(false)}else{this.getView().mAggregations.content[0].mAggregations.pages[0].mAggregations.footer.removeStyleClass("classFooterHidden").addStyleClass("classFooterVisible");this.getView().byId("idsavebtn").setVisible(true);this.getView().byId("idsubmitforapproval").setVisible(true);this.getView().byId("idapproval").setVisible(false);this.getView().byId("Addiconbtn").setVisible(true);this.getView().byId("dateRangeComboBox").setSelectedKey(o.sDateRange);this.getView().byId("dateRangeComboBox").setEnabled(true);this.getView().byId("statusvisible").setVisible(false);this.getView().byId("subdatevisible").setVisible(false);this.getView().byId("substatusvisible").setVisible(false);this.getView().byId("iddelete").setVisible(false);var h=e.getParameter("arguments").sEmail;var u=this.oGmodel.oData.loggedInUser.FullName}if(o.sDateRange==="D"){var m=new t({array:this.oGmodel.oData.odata.results});o.oModel=new t({currentStartDate:null,allocations:[{Type:"",project:"",Phase:"",description:"",hours:{mon:"0",tue:"0",wed:"0",thu:"0",fri:"0",sat:"0",sun:"0"},totalHours:"0",AvailableHours:"0",hidingProjNam:true,isDeleteButtonVisible:false,flags:{hidingTextarea:true,hidingTotalInt:false}},{Type:"",project:"",Phase:"",description:"",hours:{mon:"0",tue:"0",wed:"0",thu:"0",fri:"0",sat:"0",sun:"0"},totalHours:"0",hidingProjNam:false,isDeleteButtonVisible:false,flags:{hidingTextarea:false,hidingTotalInt:true}}],dateRanges:this.getDateRanges(),dates:["","","","","","",""],isHoliday:{mon:true,tue:true,wed:true,thu:true,fri:true,sat:true,sun:true},holidayName:{mon:"",tue:"",wed:"",thu:"",fri:"",sat:"",sun:""}});this.getView().setModel(o.oModel)}else{this.loadData()}this.byId("FullName").setText(o.oGmodel.oData.loggedInUser.FullName);var m=new t({array:o.oGmodel.oData.odata});this.loadProjectData();if(!o.oGmodel.oData["loggedInUser"]){this.getOwnerComponent().getRouter().navTo("Loginpage");return}},onProjectSelectionChange:function(e){var t=this.getOwnerComponent().getModel("oModel");var s=e.getParameter("selectedItem");var r=s.getKey();var o={ProjectID:r};new Promise(function(e,a){t.callFunction("/AvailableHours",{method:"GET",urlParameters:o,success:function(t,a){var s=t.AvailableHours.AvailableHours;e(s)},error:function(e){console.error("Error retrieving available hours:",e);a(e)}})}).then(function(t){e.getParameters().selectedItem.getBindingContext().getObject().AvailableHours=t;this.getView().getModel().refresh(true)}.bind(this)).catch(function(e){a.show("Error retrieving available hours:",e)})},getDateRanges:function(){o.dateRanges=[];var e=new Date;var t=new Date(e);t.setMonth(e.getMonth()-3);var a=new Date(e);a.setMonth(e.getMonth()+3);while(t<=a){var s=this._getMonday(t);var r=new Date(s);r.setDate(r.getDate()+6);var i=this._formatDate(s);var n=this._formatDate(r);var l=`${i}, ${s.getFullYear()} - ${n}, ${r.getFullYear()}`;o.dateRanges.push({key:l,text:l});t.setDate(t.getDate()+7)}return dateRanges},_formatDate:function(e){var t={month:"short",day:"numeric"};return e.toLocaleDateString("en-US",t)},_getMonday:function(e){var t=new Date(e);var a=t.getDay();var s=t.getDate()-a+(a===0?-6:1);return new Date(t.setDate(s))},onDateRangeChange:function(e){var t=e.getParameter("selectedItem").getText();var a=t.split(" - ")[0];var s=new Date(a);this.getView().getModel().setProperty("/currentStartDate",s);this._updateWeek()},formatDateToISO:function(e){var t=e.getFullYear();var a=String(e.getMonth()+1).padStart(2,"0");var s=String(e.getDate()).padStart(2,"0");return`${t}-${a}-${s}`},_updateWeek:function(){var e=this.getView().getModel();var t=e.getProperty("/currentStartDate");var a=[];var s={mon:true,tue:true,wed:true,thu:true,fri:true,sat:true,sun:true};var r={mon:"",tue:"",wed:"",thu:"",fri:"",sat:"",sun:""};var o=[];if(t){for(var i=0;i<7;i++){var n=new Date(t);n.setDate(t.getDate()+i);var l=this.formatDateToISO(n);o.push({date:l});a.push(this._formatDate(n))}}else{a=["","","","","","",""]}var g=JSON.stringify(o);this.holidaycheck(g,o,a,s,r,e)},holidaycheck:function(e,t,a,s,r,o){var i=this.getOwnerComponent().getModel("oModel");i.callFunction("/HolidayCheck",{method:"GET",urlParameters:{dates:e},success:function(e,i){var n=JSON.parse(e.HolidayCheck);if(n.length>0){n.forEach(function(e){var a=e.Date.split("T")[0];var o=e.HoildayName;t.forEach(function(e,t){if(e.date===a){switch(t){case 0:s.mon=false;r.mon=o;break;case 1:s.tue=false;r.tue=o;break;case 2:s.wed=false;r.wed=o;break;case 3:s.thu=false;r.thu=o;break;case 4:s.fri=false;r.fri=o;break;case 5:s.sat=false;r.sat=o;break;case 6:s.sun=false;r.sun=o;break}}})})}o.setProperty("/dates",a);o.setProperty("/isHoliday",s);o.setProperty("/holidayName",r)},error:function(e){console.error("Error occurred while fetching holidays:",e)}})},onAddPress:function(){var e={Type:"",project:"",Phase:"",description:"",hours:{mon:"0",tue:"0",wed:"0",thu:"0",fri:"0",sat:"0",sun:"0"},totalHours:"0",AvailableHours:"0",hidingProjNam:true,flags:{hidingTextarea:true,hidingTotalInt:false}};var t=this.getView().getModel().getData();var a=t.allocations.findIndex(function(e){return!e.hidingProjNam});if(a!==-1){t.allocations.splice(a,0,e)}else{t.allocations.push(e)}this.getView().getModel().refresh(true);var s=this.byId("allocationTable");s.getBinding("items").refresh(true)},CustomerHeader:function(e){var t=e.getSource(),a=this.getView();var r=this.getOwnerComponent().getModel("oGmodel");var o=r.oData["loggedInUser"].FullName;var i=r.oData["loggedInUser"].Email;if(!this._Logoutpopover){this._Logoutpopover=s.load({id:a.getId(),name:"timesheetapplication.Fragments.Headericon",controller:this}).then(function(e){a.addDependent(e);a.byId("title").setText(o);a.byId("email").setText(i);return e})}this._Logoutpopover.then(function(e){a.byId("title").setText(o);a.byId("email").setText(i);if(e.isOpen()){e.close()}else{e.openBy(t)}})},HandleSignout:function(){this.getOwnerComponent().getRouter().navTo("RouteView");this.byId("emailInput").setValue("");this.byId("passwordInput").setValue("")},loadData:function(){var e=this.getOwnerComponent().getModel("oModel");o.view=this.getView();var s=[];o.busyDialog=new sap.m.BusyDialog;o.busyDialog.open();var r={EmployeeName:o.sName,period:o.sDateRange,Status:o.Status};e.callFunction("/RetriveTimeSheetdata",{method:"GET",urlParameters:r,success:function(e,a){var r=JSON.parse(e.RetriveTimeSheetdata);var i=r.header;s=r.items;if(s.length===0){var n={Type:"",project:"",Phase:"",description:"",hours:{mon:"0",tue:"0",wed:"0",thu:"0",fri:"0",sat:"0",sun:"0"},totalHours:"0",AvailableHours:"0",hidingProjNam:true,isDeleteButtonVisible:false,flags:{hidingTextarea:true,hidingTotalInt:false}};var l=new t({currentStartDate:this.sDateRange,dates:["","","","","","",""],isHoliday:{mon:true,tue:true,wed:true,thu:true,fri:true,sat:true,sun:true},allocations:[n]});this.getView().setModel(l);return}var g=s.slice(0,-1).map(function(e){return{Type:e.PROJECTTYPE,Project:e.PROJECTNAME,ProjectId:e.PROJECTID_PROJECTID,Phase:e.PHASE,description:e.DELIVERABLE,hours:{mon:e.MONDAY||"0",tue:e.TUESDAY||"0",wed:e.WEDNESDAY||"0",thu:e.THURSDAY||"0",fri:e.FRIDAY||"0",sat:e.SATURDAY||"0",sun:e.SUNDAY||"0"},totalHours:e.WORKINGHOURS||"0",AvailableHours:e.AVAILABLEHOURS,hidingProjNam:true,isDeleteButtonVisible:false,flags:{hidingTextarea:true,hidingTotalInt:false}}});var d=s[s.length-1];var n={project:d.PROJECTNAME||"",description:d.DELIVERABLE||"",hours:{mon:d.MONDAY||"0",tue:d.TUESDAY||"0",wed:d.WEDNESDAY||"0",thu:d.THURSDAY||"0",fri:d.FRIDAY||"0",sat:d.SATURDAY||"0",sun:d.SUNDAY||"0"},totalHours:d.WORKINGHOURS||"0",hidingProjNam:false,isDeleteButtonVisible:false,flags:{hidingTextarea:false,hidingTotalInt:true}};g.push(n);var u=o.sDateRange;var h=u.split(" - ")[0];var m=h.split(" ");var v=m[0];var c=parseInt(m[1].replace(",",""),10);var b=parseInt(m[2],10);var p={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11};var f=p[v];var D=new Date(b,f,c);var w=D.toISOString();var I=new Date(w);var S=[];if(I){for(var y=0;y<7;y++){var D=new Date(I);D.setDate(I.getDate()+y);var V={month:"short",day:"numeric"};var T=D.toLocaleDateString("en-US",V);S.push(T)}}else{S=["","","","","","",""]}var E=[{key:o.sDateRange,text:o.sDateRange}];var l=new t({dateRanges:o.dateRanges,dates:S,allocations:g});o.view.setModel(l);o.view.byId("dateRangeComboBox").setSelectedKey(o.sDateRange);setTimeout(function(){o.busyDialog.close()},3e3)},error:function(e){a.show("Failed to retrieve timesheet data.")}})},_updateWeeks:function(e){var t=new Date(e);var a=[];if(t){for(var s=0;s<7;s++){var r=new Date(t);r.setDate(t.getDate()+s);a.push(this._formatDate(r))}}else{a=["","","","","","",""]}return a},onHoursChange:function(e){var t=e.getSource();var a=t.getBindingContext().getPath();var s=a.split("/").pop();var r=this.getView().getModel();var o=r.getProperty(a);var i=e.getSource().mBindingInfos.value.parts[0].path.split("/")[1];var n=t.getValue();var l=parseFloat(n);if(l<0||l>8){sap.m.MessageBox.error("Please enter a valid number between 0 and 8.");t.setValue("0");return}if(!/^0?[0-8]$/.test(n)||isNaN(l)){sap.m.MessageBox.error("Please enter a valid number between 0 and 8.");t.setValue("0");return}o.hours[i]=n;var g=0;for(var d in o.hours){g+=parseFloat(o.hours[d])||0}if(g>40){sap.m.MessageBox.error("Total hours for the week cannot exceed 40.");t.setValue("0");return}r.setProperty(a+"/totalHours",g);var u=r.getProperty("/allocations");var h=0;for(var m=0;m<u.length-1;m++){var v=u[m];h+=parseFloat(v.hours[i])||0}var c=h>8;if(c){sap.m.MessageBox.error("The total hours for "+i+" cannot exceed 8 hours.");t.setValue("0");return}var b=u.length;var p=b-1;var f="/allocations/"+p;r.setProperty(f+"/hours/"+i,h);var D=0;for(var m=0;m<u.length-1;m++){D+=u[m].totalHours||0}r.setProperty(f+"/totalHours",D)},onDeletePress:function(e){var t=this.getView().byId("allocationTable");var a=this.getView().getModel();var s=a.getProperty("/allocations");var r=e.getParameter("listItem")||e.getSource().getParent();var i=r.getBindingContextPath();var n=parseInt(i.split("/")[i.split("/").length-1]);if(n>-1&&n<s.length){s.splice(n,1);a.setProperty("/allocations",s)}t.addItem(o.oTotalRow)},loadProjectData:function(){var e=this.getOwnerComponent().getModel("oModel");var t=this;e.callFunction("/Detailsofproject",{method:"GET",success:function(e){var a=JSON.parse(e.Detailsofproject);var s=a.map(function(e){return{PROJECTID:e.PROJECTID,PROJECTNAME:e.PROJECTNAME}});var r=new sap.ui.model.json.JSONModel;r.setData(s);t.getView().setModel(r,"projectModel")},error:function(e){sap.m.MessageToast.show("Failed to load project data.")}})},onHomePress:function(){this.getOwnerComponent().getRouter().navTo("RouteViewnenu")},onBackPressTimeSheetPage:function(){this.getOwnerComponent().getRouter().navTo("Timesheetdata")},onApproved:function(){var e=this.getOwnerComponent().getModel("oGmodel");var t=e.oData["loggedInUser"].FullName;var a=new Date;var s=a.getFullYear();var r=String(a.getMonth()+1).padStart(2,"0");var i=String(a.getDate()).padStart(2,"0");var n=s+"-"+r+"-"+i;var l="Approved";var g={Status:l,EmpName:o.sName,Period:o.sDateRange,sDate:n,sSubmittedby:t};var d=JSON.stringify(g);var u=this.getOwnerComponent().getModel("oModel");u.callFunction("/TimeSheetApproved",{method:"GET",urlParameters:{data:d},success:function(e){sap.m.MessageToast.show("Timesheet Approved successfully.");this.getOwnerComponent().getRouter().navTo("Timesheetdata")}.bind(this),error:function(e){sap.m.MessageBox.error("An error occurred while Approved the timesheet status.")}})},onDelete:function(){var e={Period:o.sDateRange,EmpName:o.sName};var t=JSON.stringify(e);var a=this.getOwnerComponent().getModel("oModel");a.callFunction("/TimeSheetDelete",{method:"GET",urlParameters:{deleteddata:t},success:function(e){sap.m.MessageToast.show("Time Deleted successfully")},error:function(e){sap.m.MessageBox.error("An error occurred while Deleting the timesheet status.")}})},onSave:function(e){var t=e.getSource().getText();var a=t==="Save"?"Saved":"Submitted";this.submit(a)},submit:function(e){var t=this.getView();var s=this.getOwnerComponent().getModel("oGmodel");var r=s.oData["loggedInUser"].Email;o.sEmpID=s.oData.odata.EMPLOYEEID;var i=this.byId("dateRangeComboBox").getSelectedItem()?this.byId("dateRangeComboBox").getSelectedItem().getKey():"";var n=s.oData.loggedInUser.FullName;var l=new Date;var g=l.getFullYear();var d=String(l.getMonth()+1).padStart(2,"0");var u=String(l.getDate()).padStart(2,"0");var h=String(l.getHours()).padStart(2,"0");var m=String(l.getMinutes()).padStart(2,"0");var v=String(l.getSeconds()).padStart(2,"0");var c=`T${g}${d}${u}${h}${m}${v}`;var b=g+"-"+d+"-"+u;if(!i){sap.m.MessageBox.error("Please select a date range before submitting.");return}var p={TIMESHEETID:c,PERIOD:i,EMPLOYEENAME:n,SUBMITTEDBY:n,STATUS:e,DATE:b,EMPLOYEEID_EMPLOYEEID:o.sEmpID};var f=[];var D=this.byId("allocationTable");var w=D.getItems();var I={};for(var S=0;S<w.length;S++){var y=w[S];var V=y.getCells();var T=Date.now()%1e9+Math.floor(Math.random()*1e3);var E=parseInt(V[11].getText(),10)||0;var M=parseInt(V[12].getText(),10)||0;var P;if(e==="Submitted"&&S<w.length-1){P=M-E}if(S!==w.length-1){var R=V[1].getSelectedKey();if(!R){sap.m.MessageBox.error("Please select Project Name before submitting.");return}if(!I[R]){I[R]={totalHours:0,availableHour:M}}I[R].totalHours+=E;if(I[R].totalHours>I[R].availableHour){sap.m.MessageBox.error("Combined working hours exceed available hours for project: "+V[1].getSelectedItem().getText());return}var A=V[0].getSelectedKey();var C=V[2].getSelectedKey();if(!A){sap.m.MessageBox.error("Please select Project Type before submitting.");return}if(!C){sap.m.MessageBox.error("Please select Project Phase before submitting.");return}}var O={AUTO_INCREMENT_ID:T,TIMESHEETID:c,EMPLOYEENAME:n,PERIOD:i,PROJECTID_PROJECTID:R,PROJECTNAME:V[1].getSelectedItem()?V[1].getSelectedItem().getText():"",PROJECTTYPE:A,PHASE:C,DELIVERABLE:V[3].getItems().length>0?V[3].getItems()[0].getValue():"",MONDAY:parseInt(V[4].getValue(),10)||0,TUESDAY:parseInt(V[5].getValue(),10)||0,WEDNESDAY:parseInt(V[6].getValue(),10)||0,THURSDAY:parseInt(V[7].getValue(),10)||0,FRIDAY:parseInt(V[8].getValue(),10)||0,SATURDAY:parseInt(V[9].getValue(),10)||0,SUNDAY:parseInt(V[10].getValue(),10)||0,WORKINGHOURS:E,AvailableHours:M};f.push(O)}var N={headerData:JSON.stringify(p),itemsData:JSON.stringify(f),period:i};var x=this.getOwnerComponent().getModel("oModel");x.callFunction("/TimeSheetSubmit",{urlParameters:N,success:function(t){if(t.TimeSheetSubmit.status==="Error"){sap.m.MessageBox.error("TimeSheet already submitted for this time period")}else{a.show("Timesheet"+e+" successfully!")}},error:function(e){a.show("Error: "+e.message)}})}})});
},
	"timesheetapplication/controller/Timesheetdata.controller.js":function(){
sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","sap/ui/core/Fragment","sap/m/MessageBox"],function(e,t,o,a){"use strict";var s=this;return e.extend("timesheetapplication.controller.Timesheetdata",{onInit:function(){this.array=[];s.oGmodel=this.getOwnerComponent().getModel("oGmodel");this.getOwnerComponent().getRouter().getRoute("Timesheetdata").attachPatternMatched(this._onPatternMatched,this)},_onPatternMatched:function(){s.oGmodel=this.getOwnerComponent().getModel("oGmodel");if(!s.oGmodel.oData["loggedInUser"]){this.getOwnerComponent().getRouter().navTo("RouteView");return}this.byId("FullName").setText(s.oGmodel.oData.loggedInUser.FullName);var e=new t({array:s.oGmodel.oData.odata.FULLNAME});this.getView().byId("usersComboBox").setModel(e);this.getView().byId("usersComboBox").setSelectedKey(s.oGmodel.oData.loggedInUser.Email);var o=s.oGmodel.oData.odata.EMPLOYEEID;this.onFetchTimesheetData(o);if(!s.oGmodel.oData["loggedInUser"]){this.getOwnerComponent().getRouter().navTo("RouteView");return}if(s.oGmodel.oData.odata.MANAGERFLAG==="No"){this.getView().byId("NewTimeSheet").setVisible(true);this.getView().mAggregations.content[0].mAggregations.footer.removeStyleClass("classFooterHidden").addStyleClass("classFooterVisible");this.getView().byId("usersComboBox").setVisible(false)}else{this.getView().mAggregations.content[0].mAggregations.footer.removeStyleClass("classFooterVisible").addStyleClass("classFooterHidden");this.getView().byId("NewTimeSheet").setVisible(false);this.getView().byId("usersComboBox").setVisible(true)}},onFetchTimesheetData:function(e){var t=this.getOwnerComponent().getModel("oModel");var o={empid:e};t.callFunction("/TimeSheetdata",{method:"GET",urlParameters:o,success:function(e){try{var t=JSON.parse(e.TimeSheetdata);if(t&&t.length>0){var o=new sap.ui.model.json.JSONModel;o.setData({timesheetData:t});this.getView().setModel(o,"timesheetModel");var o=new sap.ui.model.json.JSONModel;var a=[...new Set(t.map(e=>e.EMPLOYEENAME))];var s=new sap.ui.model.json.JSONModel;s.setData({employees:a.map(e=>({name:e}))});this.getView().setModel(s,"employeeModel")}else{sap.m.MessageToast.show("No timesheet data avalible")}}catch(e){sap.m.MessageBox.error("No timesheet data avalible")}}.bind(this),error:function(e){sap.m.MessageBox.error("An error occurred while fetching timesheet data.")}})},onSelectusername:function(e){var t=e.getSource().getSelectedItem()?e.getSource().getSelectedItem().getKey():"";var o=this.getView().byId("timesheetTable");var a=o.getBinding("items");if(t===""){a.filter([])}else{var s=new sap.ui.model.Filter("EMPLOYEENAME",sap.ui.model.FilterOperator.EQ,t);a.filter([s])}},onBefore:function(){if(true){sap.m.MessageBox.confirm("You have unsaved changes. Do you want to proceed without saving?",{actions:[a.Action.YES,a.Action.NO],onClose:function(e){if(e===a.Action.YES){this.getOwnerComponent().getRouter().navTo("RouteView")}else{}}.bind(this)})}},oncreatenewtimesheet:function(){var e=sap.ui.core.UIComponent.getRouterFor(this);var t="D";var o="E";var a="ST";var s="SB";var i="DT";e.navTo("NewTimesheet",{dateRange:t,Status:a,Name:o,submit:s,Sdate:i})},onRowPress:function(e){var t=sap.ui.core.UIComponent.getRouterFor(this);var o=e.getSource().getBindingContext("timesheetModel").getObject();var a=o.EMPLOYEENAME;var s=o.PERIOD;var i=o.STATUS;var n=o.SUBMITTEDBY;var r=o.DATE;t.navTo("NewTimesheet",{dateRange:s,Status:i,Name:a,submit:n,Sdate:r})},onHomePress:function(){this.getOwnerComponent().getRouter().navTo("RouteView")},CustomerHeader:function(e){var t=e.getSource(),a=this.getView();var i=this.getOwnerComponent().getModel("oGmodel");s.Email=i.oData["loggedInUser"].Email;s.FullName=i.oData["loggedInUser"].FullName;if(!this._Logoutpopover){this._Logoutpopover=o.load({id:a.getId(),name:"timesheetapplication.Fragments.Headericon",controller:this}).then(function(e){a.addDependent(e);a.byId("title").setText(s.FullName);a.byId("email").setText(s.Email);return e})}this._Logoutpopover.then(function(e){a.byId("title").setText(s.FullName);a.byId("email").setText(s.Email);if(e.isOpen()){e.close()}else{e.openBy(t)}})},HandleSignout:function(){this.getOwnerComponent().getRouter().navTo("RouteView");this.byId("emailInput").setValue("");this.byId("passwordInput").setValue("")}})});
},
	"timesheetapplication/controller/View.controller.js":function(){
sap.ui.define(["sap/ui/core/mvc/Controller","sap/m/MessageToast","sap/m/MessageBox"],function(e,t,o){"use strict";var a=this;return e.extend("timesheetapplication.controller.View",{onInit:function(){a.component=this.getOwnerComponent().getRouter().initialize();var e=this.getOwnerComponent();a.oGmodel=e.getModel("oGmodel");a.busyDialog=new sap.m.BusyDialog;a.busyDialog.setBusyIndicatorDelay(0);a.busyDialog.setBusyIndicatorSize("Large");a.busyDialog.open();setTimeout(()=>{a.busyDialog.close()},5e3)},onSignUpPress:function(){var e=this.getView();var r=e.byId("emailInput").getValue();var s=e.byId("passwordInput").getValue();var n=this.getOwnerComponent().getModel("oModel");n.refreshMetadata().then(function(){console.log("Metadata refreshed successfully.")}).catch(function(e){console.error("Error refreshing metadata:",e)});if(!r||!s){o.error("Please enter both email and password.");return}var n=this.getView().getModel("oModel");var i={email:r,password:s};n.callFunction("/checkCredentials",{method:"GET",urlParameters:i,success:function(e,r){if(r.data!==true){t.show("Success! Credentials are valid.");a.oGmodel.setData({loggedInUser:{Email:e.EMAILID,FullName:e.FULLNAME,MANAGERFLAG:e.MANAGERFLAG},odata:e});a.component.navTo("Timesheetdata")}else{o.error("Invalid credentials. Please try again.")}},error:function(e){o.error("An error occurred while checking credentials.")}})}})});
},
	"timesheetapplication/i18n/i18n.properties":'# This is the resource bundle for timesheetapplication\n\n#Texts for manifest.json\n\n#XTIT: Application name\nappTitle=App Title\n\n#YDES: Application description\nappDescription=An SAP Fiori application.\n#XTIT: Main view title\ntitle=App Title\n\n#XFLD,27\nflpTitle=Timesheet\n',
	"timesheetapplication/manifest.json":'{"_version":"1.65.0","sap.app":{"id":"timesheetapplication","type":"application","i18n":"i18n/i18n.properties","applicationVersion":{"version":"0.0.1"},"title":"{{appTitle}}","description":"{{appDescription}}","resources":"resources.json","sourceTemplate":{"id":"@sap/generator-fiori:basic","version":"1.14.5","toolsId":"740031d9-20ac-4b97-8c2d-b3447707d6bd"},"dataSources":{"mainService":{"uri":"v2/odata/v4/catalog/","type":"OData","settings":{"annotations":[],"odataVersion":"2.0"}}},"crossNavigation":{"inbounds":{"object-display":{"semanticObject":"object","action":"display","title":"{{flpTitle}}","signature":{"parameters":{},"additionalParameters":"allowed"}}}}},"sap.ui":{"technology":"UI5","icons":{"icon":"","favIcon":"","phone":"","phone@2":"","tablet":"","tablet@2":""},"deviceTypes":{"desktop":true,"tablet":true,"phone":true}},"sap.ui5":{"flexEnabled":true,"dependencies":{"minUI5Version":"1.127.1","libs":{"sap.m":{},"sap.ui.core":{},"sap.f":{},"sap.suite.ui.generic.template":{},"sap.ui.comp":{},"sap.ui.generic.app":{},"sap.ui.table":{},"sap.ushell":{}}},"contentDensities":{"compact":true,"cozy":true},"models":{"i18n":{"type":"sap.ui.model.resource.ResourceModel","settings":{"bundleName":"timesheetapplication.i18n.i18n"}},"oGmodel":{"type":"sap.ui.model.json.JSONModel"},"oModel":{"dataSource":"mainService","preload":true,"settings":{"operationMode":"Server","autoExpandSelect":true,"earlyRequests":true}}},"resources":{"css":[{"uri":"css/style.css"}]},"routing":{"config":{"routerClass":"sap.m.routing.Router","viewType":"XML","async":true,"viewPath":"timesheetapplication.view","controlAggregation":"pages","controlId":"app","clearControlAggregation":false},"routes":[{"name":"RouteView","pattern":"","target":["TargetView"]},{"name":"Timesheetdata","pattern":"Timesheetdata","target":["Timesheetdata"]},{"name":"NewTimesheet","pattern":"NewTimesheet/{dateRange}/{Name}/{Status}/{submit}/{Sdate}","target":["NewTimesheet"]}],"targets":{"TargetView":{"viewType":"XML","transition":"slide","clearControlAggregation":false,"viewId":"View","viewName":"View"},"Timesheetdata":{"viewType":"XML","transition":"slide","clearControlAggregation":false,"viewId":"Timesheetdata","viewName":"Timesheetdata"},"NewTimesheet":{"viewType":"XML","transition":"slide","clearControlAggregation":false,"viewId":"NewTimesheet","viewName":"NewTimesheet"}}},"rootView":{"viewName":"timesheetapplication.view.App","type":"XML","async":true,"id":"App"}},"sap.cloud":{"public":true,"service":"TimeSheet"}}',
	"timesheetapplication/model/models.js":function(){
sap.ui.define(["sap/ui/model/json/JSONModel","sap/ui/Device"],function(e,n){"use strict";return{createDeviceModel:function(){var i=new e(n);i.setDefaultBindingMode("OneWay");return i}}});
},
	"timesheetapplication/view/App.view.xml":'<mvc:View controllerName="timesheetapplication.controller.App"\n    xmlns:html="http://www.w3.org/1999/xhtml"\n    xmlns:mvc="sap.ui.core.mvc" displayBlock="true"\n    xmlns="sap.m"><App id="app"></App></mvc:View>\n',
	"timesheetapplication/view/NewTimesheet.view.xml":'<mvc:View\n    controllerName="timesheetapplication.controller.NewTimesheet"\n    xmlns:mvc="sap.ui.core.mvc"\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:l="sap.ui.layout"\n    xmlns:f="sap.ui.layout.form"\n><App><pages><Page\n                title="Timesheet Allocations"\n                navButtonPress="onBackPressTimeSheetPage"\n                showNavButton="true"\n                \n            ><headerContent><Title\n                        text=""\n                        id="FullName"\n                        level="H1"\n                    /><core:Icon\n                        src="sap-icon://customer"\n                        size="150%"\n                        press="CustomerHeader"\n                        decorative="false"\n                        id="idUserIcon"\n                        color="#0000ff"\n                    ><core:layoutData><FlexItemData growFactor="1" /></core:layoutData></core:Icon></headerContent><content><VBox\n                        class=""\n                        id="stickyHeader"\n                    ><HBox\n                            justifyContent="SpaceBetween"\n                            alignItems="Center"\n                            class=""\n                        ><HBox alignItems="Center"><Label\n                                    text="Date Range:"\n                                    class="sapUiTinyMarginEnd classLabelDtRng"\n                                /><ComboBox\n                                    id="dateRangeComboBox"\n                                    selectionChange="onDateRangeChange"\n                                    items="{/dateRanges}"\n                                    width="250px"\n                                ><core:Item\n                                        key="{key}"\n                                        text="{text}"\n                                    /></ComboBox></HBox><HBox id="statusvisible"><Text\n                                text="Status:"\n                                 textAlign="Center"\n                              \n                                /><Text text="{ostatusModel>/Status}"  class="sapUiTinyMarginBegin"/></HBox><HBox id ="subdatevisible"><Text\n                                text= "{=${ostatusModel>/Status} === \'Submitted\' ? \'Submitted Date:\' : ${ostatusModel>/Status} === \'Approved\' ? \'Approved Date:\' : \'Saved Date:\'}" \n                                 textAlign="Center"\n                                /><Text text="{path:\'ostatusModel>/SubDate\'}"  class="sapUiTinyMarginBegin"  /></HBox><HBox id="substatusvisible" ><Text\n                            text= "{=${ostatusModel>/Status} === \'Submitted\' ? \'Submitted By:\' : ${ostatusModel>/Status} === \'Approved\' ? \'Approved By:\' : \'\'}" \n\n                                 textAlign="Center"\n                                /><Text text="{=${ostatusModel>/Status} === \'Saved\' ? \'\' : ${ostatusModel>/SubName}}"  class="sapUiTinyMarginBegin" /></HBox><HBox alignItems="Center"><Button\n                                    id="Addiconbtn"\n                                    icon="sap-icon://add"\n                                    press="onAddPress"\n                                    tooltip="Add New project"\n                                    class="sapUiTinyMarginEnd"\n                                /></HBox></HBox></VBox><ScrollContainer\n                        width="100%"\n                        height="calc(100vh - 200px)"\n                        horizontal="false"\n                        vertical="true"\n                    ><Table\n                            id="allocationTable"\n                            items="{path: \'/allocations\'}"\n                        ><columns><Column\n                                    width="14%"\n                                    hAlign="Center"\n                                ><Text text="Project Type" /></Column><Column\n                                    width="13%"\n                                    hAlign="Center"\n                                ><Text text="Project Name" /></Column><Column\n                                    width="11%"\n                                    hAlign="Center"\n                                ><Text text="Phase" /></Column><Column\n                                    width="10%"\n                                    hAlign="Begin"\n                                ><Text text="Deliverable" /></Column><Column\n                                    width="11%"\n                                    hAlign="Center"\n                                ><VBox><Text\n                                            text="Mon"\n                                            textAlign="Center"\n                                        /><Text text="{/dates/0}" /></VBox></Column><Column\n                                    width="11%"\n                                    hAlign="Center"\n                                ><VBox><Text\n                                            text="Tue"\n                                            textAlign="Center"\n                                        /><Text text="{/dates/1}" /></VBox></Column><Column\n                                    width="11%"\n                                    hAlign="Center"\n                                ><VBox><Text\n                                            text="Wed"\n                                            textAlign="Center"\n                                        /><Text text="{/dates/2}" /></VBox></Column><Column\n                                    width="11%"\n                                    hAlign="Center"\n                                ><VBox><Text\n                                            text="Thu"\n                                            textAlign="Center"\n                                        /><Text text="{/dates/3}" /></VBox></Column><Column\n                                    width="11%"\n                                    hAlign="Center"\n                                ><VBox><Text\n                                            text="Fri"\n                                            textAlign="Center"\n                                        /><Text text="{/dates/4}" /></VBox></Column><Column\n                                    width="11%"\n                                    hAlign="Center"\n                                ><VBox><Text\n                                            text="Sat"\n                                            textAlign="Center"\n                                        /><Text text="{/dates/5}" /></VBox></Column><Column\n                                    width="11%"\n                                    hAlign="Center"\n                                ><VBox><Text\n                                            text="Sun"\n                                            textAlign="Center"\n                                        /><Text text="{/dates/6}" /></VBox></Column><Column\n                                    width="10%"\n                                    hAlign="Center"\n                                ><Text text="Total Hours" /></Column><Column\n                                    width="10%"\n                                    hAlign="Center"\n                                ><Text text="Avail Hours" /></Column><Column\n                                    width="3%"\n                                    hAlign="Center"\n                                ><Text text="" /></Column></columns><items><ColumnListItem class="customRowSpacing"><cells><ComboBox\n                                            selectedKey="{Type}"\n                                             visible="{hidingProjNam}"\n                                            placeholder="Select an option"\n                                        ><core:Item\n                                                key="Project"\n                                                text="Project"\n                                            /><core:Item\n                                                key="ProdSupply"\n                                                text="Prod. Supply"\n                                            /></ComboBox><ComboBox\n                                            selectedKey="{ProjectId}"\n                                             visible="{hidingProjNam}"\n                                            placeholder="Select project name"\n                                            selectionChange="onProjectSelectionChange"\n                                            items="{\n                                                path: \'projectModel>/\',\n                                                templateShareable: false\n                                                }"\n                                        ><core:Item\n                                                key="{projectModel>PROJECTID}"\n                                                text="{projectModel>PROJECTNAME}"\n                                            /></ComboBox><ComboBox\n                                            selectedKey="{Phase}"\n                                             visible="{hidingProjNam}"\n                                            placeholder="Select a phase"\n                                        ><core:Item\n                                                key="Build"\n                                                text="Build"\n                                            /><core:Item\n                                                key="Design"\n                                                text="Design"\n                                            /><core:Item\n                                                key="GoLiveAndCutover"\n                                                text="Go-Live and Cutover"\n                                            /><core:Item\n                                                key="Hypercare"\n                                                text="Hypercare"\n                                            /><core:Item\n                                                key="Planning"\n                                                text="Planning"\n                                            /><core:Item\n                                                key="ProductionSupport"\n                                                text="Production Support"\n                                            /><core:Item\n                                                key="Test"\n                                                text="Test"\n                                            /><core:Item\n                                                key="Training"\n                                                text="Training"\n                                            /></ComboBox><HBox><TextArea\n                                                id="descriptionInput"\n                                                width="100%"\n                                                value="{description}"\n                                                visible="{flags/hidingTextarea}"\n                                                placeholder="Enter description (up to 100 words)"\n                                                maxLength="1000"\n                                                liveChange="onDescriptionLiveChange"\n                                            /><Text\n                                                text="Total:"\n                                                visible="{flags/hidingTotalInt}"\n                                            /></HBox><Input\n                                            value="{hours/mon}"\n                                            width="3rem"\n                                            change="onHoursChange"\n                                            \n                                        /><Input\n                                            value="{hours/tue}"\n                                            width="3rem"\n                                            change="onHoursChange"\n                                          \n                                        /><Input\n                                            value="{hours/wed}"\n                                            width="3rem"\n                                            change="onHoursChange"\n                                         \n                                        /><Input\n                                            value="{hours/thu}"\n                                            width="3rem"\n                                            change="onHoursChange"\n                                           \n                                        /><Input\n                                            value="{hours/fri}"\n                                            width="3rem"\n                                            change="onHoursChange"\n                              \n                                        /><Input\n                                            value="{hours/sat}"\n                                            width="3rem"\n                                            change="onHoursChange"\n                                            \n                                        /><Input\n                                            value="{hours/sun}"\n                                            width="3rem"\n                                            change="onHoursChange"\n                                        /><Text\n                                            text="{totalHours}"\n                                            textAlign="Center"\n                                        /><Text\n                                            text="{AvailableHours}"\n                                            textAlign="Center"\n                                        /><Button\n                                            icon="sap-icon://delete"\n                                            press=".onDeletePress"\n                                            type="Reject"\n                                            visible="{isDeleteButtonVisible}"\n                                        /></cells></ColumnListItem></items></Table></ScrollContainer></content><footer><OverflowToolbar><ToolbarSpacer /><Button\n                        id="idsavebtn"\n                            text="Save"\n                            press="onSave"\n                            class="sapUiTinyMarginEnd"\n                            type="Accept"\n                            icon="sap-icon://save"\n                        /><Button\n                        id="idsubmitforapproval"\n                            text="Submit for Approval"\n                            press="onSave"\n                            type="Emphasized"\n                            icon="sap-icon://approvals"\n                        /><Button\n                        id="iddelete"\n                            text="Delete"\n                            press="onDelete"\n                            type="Reject"\n                            icon="sap-icon://delete"\n                            \n                            \n                        /><Button\n                        id="idapproval"\n                            text="Approve"\n                            press="onApproved"\n                            type="Emphasized"\n                            icon="sap-icon://approvals"\n                            \n                        /></OverflowToolbar></footer></Page></pages></App></mvc:View>\n',
	"timesheetapplication/view/Timesheetdata.view.xml":'<mvc:View\n    xmlns:form="sap.ui.layout.form"\n    controllerName="timesheetapplication.controller.Timesheetdata"\n    xmlns:mvc="sap.ui.core.mvc"\n    displayBlock="true"\n    xmlns:core="sap.ui.core"\n    xmlns="sap.m"\n><Page\n        id="pageid"\n        showFooter="true"\n    ><customHeader class="sapUiNoMargin"><Bar><contentLeft><Button\n                        icon="sap-icon://home"\n                        press="onHomePress"\n                        tooltip="Home"\n                        text="Home"\n                        type="Emphasized"\n                    /></contentLeft><contentMiddle><Label\n                        text="Time Sheet"\n                        design="Bold"\n                        class=".classlabelTimesheet"\n                    /></contentMiddle><contentRight><Title\n                        text=""\n                        id="FullName"\n                        level="H1"\n                    /><core:Icon\n                        src="sap-icon://customer"\n                        size="150%"\n                        press="CustomerHeader"\n                        decorative="false"\n                        id="idUserIcon"\n                        color="#0000ff"\n                    ><core:layoutData><FlexItemData growFactor="1" /></core:layoutData></core:Icon></contentRight></Bar></customHeader><VBox><HBox\n                justifyContent="SpaceBetween"\n                alignItems="Center"\n            ><Button\n                    id="NewTimeSheet"\n                    text="New Time Sheet"\n                    press="oncreatenewtimesheet"\n                    icon="sap-icon://add-activity"\n                    tooltip="Creating new Time Sheet"\n                    type="Emphasized"\n                /><ComboBox id="usersComboBox" selectionChange="onSelectusername"\n                items="{employeeModel>/employees}"><core:Item text="{employeeModel>name}" key="{employeeModel>name}" /></ComboBox></HBox><Table\n                id="timesheetTable"\n                backgroundDesign="Transparent"\n                inset="false"\n                items="{timesheetModel>/timesheetData}"\n            ><columns><Column width="30%"><header><Label text="Name" /></header></Column><Column width="30%"><header><Label text="Period" /></header></Column><Column width="30%"><header><Label text="Status" /></header></Column><Column><header><Label text=""  visible="false"/></header></Column><Column><header><Label text="" visible="false" /></header></Column></columns><items><ColumnListItem\n                        type="Navigation"\n                        press="onRowPress"\n                        class="classcolumlistitemhower"\n                    ><cells><Text text="{timesheetModel>EMPLOYEENAME}" class="cellTextClass"/><Text text="{timesheetModel>PERIOD}" class="cellTextClass"/><Text text="{timesheetModel>STATUS}" class="cellTextClass"/><Text text="{timesheetModel>DATE}" class="cellTextClass" visible="false"/><Text text="{timesheetModel>SUBMITTEDBY}" class="cellTextClass" visible="false"/></cells></ColumnListItem></items></Table></VBox><footer><OverflowToolbar><Button\n                    id="Notificationbtn"\n                    icon="sap-icon://message-popup"\n                    press="handleMessagePopoverPress"\n                    tooltip="Show Messages"\n                ><customData><BadgeCustomData\n                            key="Notifications"\n                            value=""\n                            visible="true"\n                        /></customData></Button></OverflowToolbar></footer></Page></mvc:View>\n',
	"timesheetapplication/view/View.view.xml":'\n\n<mvc:View xmlns:form="sap.ui.layout.form" controllerName="timesheetapplication.controller.View" xmlns:mvc="sap.ui.core.mvc"\n\tdisplayBlock="true" xmlns="sap.m"><Image src="images/SBP-Logo-for-website-white-1.png" alt="Logo" class="sbpTittleId"></Image><Text text="Streamline Your Timesheet and Leave Management with SBPTimeSheet" class="subTittletextClass"></Text><HBox id="registationHbox" class="hboxClassId" width="600px"><form:SimpleForm id="loginFormId"><Label text="Email_ID" labelFor="emailInputId" design="Bold" required="true" class="classLabel"/><Input id="emailInput" placeholder="EmailID" liveChange="onLivechange"></Input><Label text="Password" labelFor="passwordInputId" design="Bold" required="true"\n\t\t\t\tclass="classLabel"></Label><Input id="passwordInput" placeholder="Enter Password" liveChange="onLivechange" type="Password"></Input><Button text="Sign In" type="Emphasized" press="onSignUpPress" class="signupButtonClass" id="buttonid" enabled="true" width="40%"/></form:SimpleForm></HBox></mvc:View>'
});
//# sourceMappingURL=Component-preload.js.map
